"use strict";(self.webpackChunkpokemon_app=self.webpackChunkpokemon_app||[]).push([[977],{6977:(gt,T,r)=>{r.r(T),r.d(T,{CardModule:()=>ct});var U=r(6019),p=r(3886),S=r(6065),t=r(3668);let P=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-card"]],decls:5,vars:0,consts:[[1,"app-container"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n  "),t._UZ(2,"router-outlet"),t._uU(3,"\n"),t.qZA(),t._uU(4,"\n"))},directives:[p.lC],styles:[".container[_ngcontent-%COMP%]{text-align:center;padding:1rem}"]}),n})();var C=r(8977),_=r(2399),O=r(4499),M=r(8100),y=r(2997),J=r(9463),A=r(3067),x=r(7038),Q=r(7384),$=r(5488),L=r(4753),c=r(2835),Z=r(4522),q=r(9433),N=r(6565);const f=_.N.serverUrl;let j=(()=>{class n{constructor(e){this.httpClient=e}getCards(e){const a=new Z.LE({fromString:`${e.query?"q="+e.query:""}&page=${e.page}&pageSize=${e.pageSize}&orderBy=${e.orderBy}`});return this.httpClient.get(`${f}/cards`,{params:a}).pipe((0,c.K)(s=>this.handleError(s)))}getListFilters(e){return this.httpClient.get(`${f}/${e}`,{context:(0,N.DN)()}).pipe((0,c.K)(a=>this.handleError(a)))}getCardsList(e){return this.httpClient.get(`${f}/cards`,{params:(new Z.LE).set("page",+e.page).set("pageSize",e.pageSize).set("orderBy",e.orderBy).set("q",e.q)}).pipe((0,c.K)(s=>this.handleError(s)))}getAll(e){let a=new Z.LE;return Object.keys(e).forEach(i=>{a=a.set(i,e[i])}),this.httpClient.get(`${f}/cards`,{params:a}).pipe((0,L.U)(i=>i),(0,c.K)(i=>this.handleError(i)))}handleError(e){return e.error instanceof ErrorEvent?(0,q._)(()=>"Ohps something wrong happen here; please try again later."):(0,q._)(()=>e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Z.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var z=r(1778),E=r(5304),u=r(9133),l=r(515),b=r(8292),v=r(8167),I=r(138),Y=r(6400),B=r(6731),H=r(86),w=r(9112),g=r(888),k=r(5694);let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-poke-card"]],inputs:{card:"card"},decls:63,vars:10,consts:[[1,"mat-elevation-z3"],["fxLayout","row","fxLayoutAlign","space-between center"],["fxFlex",""],[3,"hidden"],["fxLayout","column","fxLayoutAlign","start start"],[1,"img-placeholder"],["loading","lazy",3,"src","alt"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0),t._uU(1,"\n  "),t.TgZ(2,"mat-card-header"),t._uU(3,"\n    "),t.TgZ(4,"mat-card-title"),t._uU(5,"\n      "),t.TgZ(6,"div",1),t._uU(7,"\n        "),t.TgZ(8,"span",2),t._uU(9),t.qZA(),t._uU(10,"\n        "),t.TgZ(11,"small",3),t._uU(12),t.qZA(),t._uU(13,"\n      "),t.qZA(),t._uU(14,"\n    "),t.qZA(),t._uU(15,"\n    "),t.TgZ(16,"mat-card-subtitle"),t._uU(17,"\n      "),t.TgZ(18,"div",4),t._uU(19,"\n        "),t.TgZ(20,"p"),t.TgZ(21,"strong"),t._uU(22,"Set:"),t.qZA(),t._uU(23),t.qZA(),t._uU(24,"\n        "),t.TgZ(25,"p"),t.TgZ(26,"strong"),t._uU(27,"Series:"),t.qZA(),t._uU(28),t.qZA(),t._uU(29,"\n      "),t.qZA(),t._uU(30,"\n      "),t._UZ(31,"mat-divider"),t._uU(32,"\n    "),t.qZA(),t._uU(33,"\n    "),t.TgZ(34,"mat-card-subtitle"),t._uU(35,"\n      "),t.TgZ(36,"p"),t._uU(37,"\n        "),t.TgZ(38,"strong"),t._uU(39," Supertype:"),t.qZA(),t._uU(40),t._UZ(41,"br"),t._uU(42,"\n        "),t.TgZ(43,"strong"),t._uU(44," Subtypes:"),t.qZA(),t._uU(45),t._UZ(46,"br"),t._uU(47,"\n        "),t.TgZ(48,"strong"),t._uU(49,"Types:"),t.qZA(),t._uU(50),t.qZA(),t._uU(51,"\n    "),t.qZA(),t._uU(52,"\n  "),t.qZA(),t._uU(53,"\n  "),t.TgZ(54,"mat-card-content"),t._uU(55,"\n    "),t.TgZ(56,"div",5),t._uU(57,"\n      "),t._UZ(58,"img",6),t._uU(59,"\n    "),t.qZA(),t._uU(60,"\n  "),t.qZA(),t._uU(61,"\n"),t.qZA(),t._uU(62,"\n")),2&e&&(t.xp6(9),t.hij(" ",a.card.name,""),t.xp6(2),t.Q6J("hidden",!a.card.hp),t.xp6(1),t.hij("HP: ",a.card.hp,""),t.xp6(11),t.hij(" ",a.card.set.name,""),t.xp6(5),t.hij(" ",a.card.set.series,""),t.xp6(12),t.hij(" ",a.card.supertype," "),t.xp6(5),t.hij(" ",a.card.subtypes,"\n        "),t.xp6(5),t.hij(" ",a.card.types,"\n      "),t.xp6(8),t.s9C("src",a.card.images.small,t.LSH),t.s9C("alt",a.card.name))},directives:[g.a8,g.dk,g.n5,l.xw,l.Wh,l.yH,g.$j,k.d,g.dn],styles:["[_nghost-%COMP%]   .mat-card-header-text[_ngcontent-%COMP%]{margin:0;width:100%}[_nghost-%COMP%]   .mat-card-subtitle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .mat-card-subtitle[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}.img-placeholder[_ngcontent-%COMP%]{background-color:#f0f8ff;max-width:245px;margin:0 auto;padding:0;height:auto;min-height:285px;border-radius:10px}.img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}"]}),n})(),G=(()=>{class n{transform(e,a){return e&&e.length&&a&&a.length?e.filter(s=>(console.log(s.name),s.name.toString().toLowerCase().indexOf(a.toLowerCase())>-1)):e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"selectSearch",type:n,pure:!0}),n})();function K(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearSearch()}),t._uU(1,"\n          "),t.TgZ(2,"mat-icon"),t._uU(3,"close"),t.qZA(),t._uU(4,"\n        "),t.qZA()}}function X(n,o){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e,"")}}function D(n,o){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e,"")}}function W(n,o){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e,"")}}function V(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().searchListText=""}),t._uU(1,"\n              "),t.TgZ(2,"mat-icon"),t._uU(3,"close"),t.qZA(),t._uU(4,"\n            "),t.qZA()}}function tt(n,o){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1,"\n              "),t.TgZ(2,"span",28),t._uU(3," "),t._UZ(4,"img",29),t._uU(5," "),t.qZA(),t._uU(6),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.name),t.xp6(4),t.Q6J("src",e.images.symbol,t.LSH),t.xp6(2),t.hij(" ",e.name,"\n            ")}}function et(n,o){if(1&n&&(t.ynx(0),t._uU(1,"\n          "),t.TgZ(2,"div",32),t._uU(3,"\n            "),t._UZ(4,"app-poke-card",33),t._uU(5,"\n          "),t.qZA(),t._uU(6,"\n        "),t.BQk()),2&n){const e=o.$implicit;t.xp6(4),t.Q6J("card",e)}}function nt(n,o){if(1&n&&(t.TgZ(0,"div"),t._uU(1,"\n      "),t.TgZ(2,"div",30),t._uU(3,"\n        "),t.YNc(4,et,7,1,"ng-container",31),t._uU(5,"\n      "),t.qZA(),t._uU(6,"\n    "),t.qZA()),2&n){const e=o.ngIf;t.xp6(4),t.Q6J("ngForOf",e)}}const at=function(){return{standalone:!0}},rt=function(){return[5,10,20]},F=new z.Y("card list");let ot=(()=>{class n{constructor(e,a,s,i,m){this.dialog=e,this.fb=a,this.pokemonService=s,this.route=i,this.router=m,this.searchTerm$=new O.X(""),this.resultsLength=0,this.searchListText="",this.characters$=this.route.queryParams.pipe((0,J.b)(300),(0,A.w)(d=>{if(this.queryParams={page:d.page||1,pageSize:d.pageSize||4,orderBy:d.orderBy||"name",q:d.q||""},d.q){const h=this.convertQueryStringToObject();this.formFilter.patchValue({searchField:h.name||"",supertype:h.supertype||"",types:h.types||"",subtypes:h.subtypes||"",set:h["set.name"]||""})}return this.getCards()}),(0,x.d)(1))}ngAfterViewInit(){this.paginator.page.subscribe(()=>{console.log(this.paginator),this.queryParams.page=this.paginator.pageIndex+1,this.queryParams.pageSize=this.paginator.pageSize,this.characters$=this.getCards(),this.updateUrlQueryParams()})}ngOnInit(){this.createForm(),this.searchListening(),this.loadFilters().pipe((0,Q.b)(e=>{this.typesList=e[0].data,this.subtypesList=e[1].data,this.supertypesList=e[2].data,this.setList=e[3].data})).subscribe()}createForm(){this.formFilter=this.fb.group({searchField:[""],supertype:[""],types:[""],subtypes:[""],set:[""]})}convertQueryStringToObject(){const e=this.queryParams.q.split(" ").map(s=>s.split(":").map(i=>i.trim())).reduce((s,i)=>(s[i[0]]=i[1],s),{}),a=Object.fromEntries(Object.entries(e).filter(([s,i])=>null!=i));return console.log("\u{1f680} ~ file: list.component.ts ~ line 119 ~ ListComponent ~ convertQueryStringToObject ~ query",a),a}updateUrlQueryParams(){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:this.queryParams,queryParamsHandling:"merge"})}loadFilters(){const e=this.pokemonService.getListFilters("types"),a=this.pokemonService.getListFilters("subtypes"),s=this.pokemonService.getListFilters("supertypes"),i=this.pokemonService.getListFilters("sets");return(0,M.D)([e,a,s,i])}searchListening(){this.formFilter.valueChanges.pipe((0,$.x)(),(0,A.w)(e=>{let a="";return e.searchField&&(a=a.concat("",`name:${e.searchField}`)),e.supertype&&(a=a.concat(" ",`supertype:${e.supertype}`)),e.types&&(a=a.concat(" ",`types:${e.types}`)),e.subtypes&&(a=a.concat(" ",`subtypes:${e.subtypes}`)),e.set&&(a=a.concat(" ",`set.name:${e.set}`)),this.characters$=(0,y.of)(null),this.queryParams.q=a,this.updateUrlQueryParams(),this.getCards()})).subscribe()}clearFilters(){this.formFilter.patchValue({searchField:"",supertype:"",types:"",subtypes:"",set:""})}dispatchSearch(e){this.queryParams.page=1,this.queryParams.q=`name:${e}`,this.updateUrlQueryParams(),F.info("dispatchSearch",this.queryParams)}clearSearch(){this.formFilter.get("searchField").setValue(""),this.queryParams.q="",this.updateUrlQueryParams()}getCards(){return this.pokemonService.getAll(this.queryParams).pipe((0,L.U)(e=>{this.resultsLength=e.totalCount,this.queryParams.pageSize=e.pageSize,this.characters$=(0,y.of)(e.data)}),(0,c.K)(e=>(F.debug("getCards error",e),400===e.status&&alert("Algo estranho aconteceu"),404===e.status&&alert("Nenhum resultado encontrado"),this.characters$=(0,y.of)([]))),(0,x.d)(1))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(E.uw),t.Y36(u.qu),t.Y36(j),t.Y36(p.gz),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],viewQuery:function(e,a){if(1&e&&t.Gf(C.NW,5),2&e){let s;t.iGM(s=t.CRH())&&(a.paginator=s.first)}},decls:132,vars:24,consts:[[1,"container"],["fxLayout","row","fxLayoutAlign","center start"],["translate",""],[3,"formGroup"],[1,"flex-container"],["matInput","","formControlName","searchField",3,"keyup"],["search",""],["type","text","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["fxLayout","row wrap","fxLayoutGap","6px","fxLayoutAlign","center center"],["fxFlex","20"],["appearance","fill"],["formControlName","supertype"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["fxFlex",""],["formControlName","types"],["formControlName","subtypes"],["formControlName","set"],["matInput","","matInput","","placeholder","Type set name",1,"select-search",3,"ngModel","ngModelOptions","ngModelChange"],["class","select-search-button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["fxFlex","10"],["mat-stroked-button","","color","accent",3,"click"],[1,"card-content"],[4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions"],["paginator",""],["type","text","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"select-search-button",3,"click"],[1,"set-symbol"],["alt","symbol",3,"src"],["fxLayout","row wrap","fxLayoutGap","16px grid","fxLayout.lt-sm","column","fxLayoutAlign","start center","fxLayoutAlign.lt-sm","start center"],[4,"ngFor","ngForOf"],["fxFlex","25%","fxFlex.lt-md","50%","fxFlex.lt-sm","100%"],[3,"card"]],template:function(e,a){if(1&e){const s=t.EpF();t.TgZ(0,"div",0),t._uU(1,"\n  "),t.TgZ(2,"div",1),t._uU(3,"\n    "),t.TgZ(4,"h1",2),t._uU(5,"Pokemon Cards"),t.qZA(),t._uU(6,"\n  "),t.qZA(),t._uU(7,"\n  "),t.TgZ(8,"form",3),t._uU(9,"\n    "),t.TgZ(10,"div",4),t._uU(11,"\n      "),t.TgZ(12,"mat-form-field"),t._uU(13,"\n        "),t.TgZ(14,"mat-label"),t.TgZ(15,"span",2),t._uU(16,"Search card by Pok\xe9mon name"),t.qZA(),t.qZA(),t._uU(17,"\n        "),t.TgZ(18,"input",5,6),t.NdJ("keyup",function(){t.CHM(s);const m=t.MAs(19);return a.dispatchSearch(m.value)}),t.qZA(),t._uU(20,"\n        "),t.YNc(21,K,5,0,"button",7),t._uU(22,"\n      "),t.qZA(),t._uU(23,"\n    "),t.qZA(),t._uU(24,"\n\n    "),t.TgZ(25,"div",8),t._uU(26,"\n      "),t.TgZ(27,"div",9),t._uU(28,"\n        "),t.TgZ(29,"mat-form-field",10),t._uU(30,"\n          "),t.TgZ(31,"mat-label"),t.TgZ(32,"span",2),t._uU(33,"Filter by supertypes"),t.qZA(),t.qZA(),t._uU(34,"\n          "),t.TgZ(35,"mat-select",11),t._uU(36,"\n            "),t.TgZ(37,"mat-option",12),t.TgZ(38,"span",2),t._uU(39,"All"),t.qZA(),t.qZA(),t._uU(40,"\n            "),t.YNc(41,X,2,2,"mat-option",13),t._uU(42,"\n          "),t.qZA(),t._uU(43,"\n        "),t.qZA(),t._uU(44,"\n      "),t.qZA(),t._uU(45,"\n      "),t.TgZ(46,"div",14),t._uU(47,"\n        "),t.TgZ(48,"mat-form-field",10),t._uU(49,"\n          "),t.TgZ(50,"mat-label"),t.TgZ(51,"span",2),t._uU(52,"Filter by types"),t.qZA(),t.qZA(),t._uU(53,"\n          "),t.TgZ(54,"mat-select",15),t._uU(55,"\n            "),t.TgZ(56,"mat-option",12),t.TgZ(57,"span",2),t._uU(58,"All"),t.qZA(),t.qZA(),t._uU(59,"\n            "),t.YNc(60,D,2,2,"mat-option",13),t._uU(61,"\n          "),t.qZA(),t._uU(62,"\n        "),t.qZA(),t._uU(63,"\n      "),t.qZA(),t._uU(64,"\n      "),t.TgZ(65,"div",14),t._uU(66,"\n        "),t.TgZ(67,"mat-form-field",10),t._uU(68,"\n          "),t.TgZ(69,"mat-label"),t.TgZ(70,"span",2),t._uU(71,"Filter by subtypes"),t.qZA(),t.qZA(),t._uU(72,"\n          "),t.TgZ(73,"mat-select",16),t._uU(74,"\n            "),t.TgZ(75,"mat-option",12),t.TgZ(76,"span",2),t._uU(77,"All"),t.qZA(),t.qZA(),t._uU(78,"\n            "),t.YNc(79,W,2,2,"mat-option",13),t._uU(80,"\n          "),t.qZA(),t._uU(81,"\n        "),t.qZA(),t._uU(82,"\n      "),t.qZA(),t._uU(83,"\n      "),t.TgZ(84,"div",14),t._uU(85,"\n        "),t.TgZ(86,"mat-form-field",10),t._uU(87,"\n          "),t.TgZ(88,"mat-label"),t.TgZ(89,"span",2),t._uU(90,"Filter by set"),t.qZA(),t.qZA(),t._uU(91,"\n          "),t.TgZ(92,"mat-select",17),t._uU(93,"\n            "),t.TgZ(94,"input",18),t.NdJ("ngModelChange",function(m){return a.searchListText=m}),t.qZA(),t._uU(95,"\n            "),t.YNc(96,V,5,0,"button",19),t._uU(97,"\n            "),t.TgZ(98,"mat-option",12),t.TgZ(99,"span",2),t._uU(100,"All"),t.qZA(),t.qZA(),t._uU(101,"\n            "),t.YNc(102,tt,7,3,"mat-option",13),t.ALo(103,"selectSearch"),t._uU(104,"\n          "),t.qZA(),t._uU(105,"\n        "),t.qZA(),t._uU(106,"\n      "),t.qZA(),t._uU(107,"\n      "),t.TgZ(108,"div",20),t._uU(109,"\n        "),t.TgZ(110,"button",21),t.NdJ("click",function(){return a.clearFilters()}),t.TgZ(111,"span",2),t._uU(112,"Clear Filters"),t.qZA(),t.qZA(),t._uU(113,"\n      "),t.qZA(),t._uU(114,"\n    "),t.qZA(),t._uU(115,"\n  "),t.qZA(),t._uU(116,"\n  "),t._UZ(117,"br"),t._uU(118,"\n  "),t.TgZ(119,"div",22),t._uU(120,"\n    "),t.YNc(121,nt,7,1,"div",23),t.ALo(122,"async"),t._uU(123,"\n  "),t.qZA(),t._uU(124,"\n  "),t._UZ(125,"br"),t._uU(126,"\n  "),t.TgZ(127,"mat-paginator",24,25),t._uU(129,"\n  "),t.qZA(),t._uU(130,"\n"),t.qZA(),t._uU(131,"\n")}if(2&e){const s=t.MAs(19);t.xp6(8),t.Q6J("formGroup",a.formFilter),t.xp6(13),t.Q6J("ngIf",""!==s.value),t.xp6(16),t.Q6J("value",""),t.xp6(4),t.Q6J("ngForOf",a.supertypesList),t.xp6(15),t.Q6J("value",""),t.xp6(4),t.Q6J("ngForOf",a.typesList),t.xp6(15),t.Q6J("value",""),t.xp6(4),t.Q6J("ngForOf",a.subtypesList),t.xp6(15),t.Q6J("ngModel",a.searchListText)("ngModelOptions",t.DdM(22,at)),t.xp6(2),t.Q6J("ngIf",""!==a.searchListText),t.xp6(2),t.Q6J("value",""),t.xp6(4),t.Q6J("ngForOf",t.xi3(103,17,a.setList,a.searchListText)),t.xp6(19),t.Q6J("ngIf",t.lcZ(122,20,a.characters$)),t.xp6(6),t.Q6J("length",a.resultsLength)("pageSize",null==a.queryParams?null:a.queryParams.pageSize)("pageSizeOptions",t.DdM(23,rt))}},directives:[l.xw,l.Wh,b.Pi,u._Y,u.JL,u.sg,v.KE,v.hX,I.Nt,u.Fj,u.JJ,u.u,U.O5,l.SQ,l.yH,Y.gD,B.ey,U.sg,u.On,H.lW,C.NW,v.R9,w.Hw,R],pipes:[G,U.Ov],styles:[".mat-flat-button[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{width:100%}.select-search[_ngcontent-%COMP%]{padding:15px;width:90%}.select-search-button[_ngcontent-%COMP%]{position:absolute;right:0;top:7px}.set-symbol[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:5px;vertical-align:middle;width:24px}.card-content[_ngcontent-%COMP%]{min-height:100vh}"]}),n})();const st=[{path:"",component:P,data:{title:(0,S.J)("Card")},children:[{path:"",component:ot}]}];let it=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[],imports:[[p.Bz.forChild(st)],p.Bz]}),n})();var ut=r(6153),lt=r(3002),pt=r(862);let ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[U.ez,u.u5,u.UX,b.aw,ut.o9,pt.m,lt.q,it]]}),n})()}}]);