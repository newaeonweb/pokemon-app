<div class="container">
  <div fxLayout="row" fxLayoutAlign="center start">
    <h1 translate>Pokemon Cards</h1>
  </div>
  <div fxLayout="row wrap" fxLayoutGap="16px grid" fxLayoutAlign="space-between start">
    <div fxFlex="30%">
      <mat-form-field>
        <mat-label><span translate>Filter by supertypes</span></mat-label>
        <mat-select (selectionChange)="applyFilterSupertypes()" [(ngModel)]="supertypes">
          <mat-option [value]="''"><span translate>All</span></mat-option>
          <mat-option *ngFor="let supertypes of supertypesList" [value]="supertypes"> {{ supertypes }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div fxFlex="30%">
      <mat-form-field>
        <mat-label><span translate>Filter by subtypes</span></mat-label>
        <mat-select (selectionChange)="applyFilterSubtypes()" [(ngModel)]="subtypes">
          <mat-option [value]="''"><span translate>All</span></mat-option>
          <mat-option *ngFor="let subtypes of subtypesList" [value]="subtypes"> {{ subtypes }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div fxFlex="30%">
      <mat-form-field>
        <mat-label><span translate>Filter by types</span></mat-label>
        <mat-select (selectionChange)="applyFilterTypes()" [(ngModel)]="types">
          <mat-option [value]="''"><span translate>All</span></mat-option>
          <mat-option *ngFor="let types of typesList" [value]="types"> {{ types }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div fxFlex="10%">
      <button mat-raised-button color="primary" (click)="applyAllFilters()">
        <span translate>Apply Filters</span>
      </button>
    </div>
  </div>

  <div fxLayout="row" fxLayoutAlign="center start">
    <app-loader [isLoading]="isLoading"></app-loader>
  </div>

  <div *ngIf="isRecordsFound" fxLayout="row" fxLayoutAlign="center start">No records found</div>

  <div fxLayout="row wrap" fxLayout.xs="column" fxLayoutGap="16px grid">
    <ng-container *ngFor="let card of cards$ | async">
      <div fxFlex="25%">
        <mat-card>
          <mat-card-header>
            <mat-card-title>
              <div fxLayout="row" fxLayoutAlign="space-between center">
                <span fxFlex> {{ card.name }}</span>
                <small [hidden]="!card.hp">HP: {{ card.hp }}</small>
              </div>
            </mat-card-title>
            <mat-card-subtitle>
              <p>
                <strong> supertype:</strong> {{ card.supertype }} <br />
                <strong> subtypes:</strong>
                <span *ngFor="let item of card.subtypes">{{ item }}</span>
              </p>
            </mat-card-subtitle>
          </mat-card-header>

          <mat-card-content>
            <div class="img-placeholder">
              <img src="{{ card.images.small }}" alt="{{ card.name }}" loading="lazy" />
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </ng-container>
  </div>
  <br />
  <mat-paginator
    *ngIf="!isRecordsFound"
    #paginator
    [length]="totalCount"
    [pageSize]="pageSize"
    [pageSizeOptions]="[10, 20, 50, 100, 200]"
    showFirstLastButtons
  >
  </mat-paginator>
</div>
